@model IEnumerable<Finanzas_TF.Models.ReciboHonorariosCalculo>

@{
    ViewData["Title"] = "Cotizador 🧮 de Recibos";
}


<h1 style=" font-size: 2.0rem; margin: 30px 0px; font-weight: 700;">@ViewData["Title"]</h1>

<p style="margin-top: -25px; margin-bottom: 40px; font-weight: 600; color: green; font-style: italic;">Fecha de hoy
    @DateTime.Now.ToString("dd/MM/yyyy")</p>


<div class="row">
    <div class="col-lg-3">

        Tipo de Tasa:
        <div class="input-group mb-3">
            <select class="form-control" name="Tasa">
                <option value=1>Nominal</option>
                <option value=0 selected>Efectiva</option>
            </select>
        </div>

        Moneda:
        <div class="input-group mb-3">
            <select class="form-control" name="Moneda">
                <option value=0 selected>Soles (S/.)</option>
                <option value=1>Dolares ($)</option>
            </select>
        </div>

                Valor a Recibir:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">S/</span>
            </div>
            <input type="text" disabled class="form-control disabled" aria-label=""
                value="@Model.Sum(c=>c.ValorRecibir)">
        </div>

    </div>

    <div class="col-lg-3">

        Tasa Anual:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">%</span>
            </div>
            <input type="number" step="0.01" name="TEA" class="form-control" aria-label="">
        </div>

        Cotización Dolar:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">S/</span>
            </div>
            <input type="number" step="0.01" name="dolar" class="form-control disabled" disabled aria-label=""
                value="@ViewBag.dolar">
        </div>

        TCEA:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">%</span>
            </div>
            <input type="number" step="0.01" name="dolar" class="form-control disabled" disabled aria-label=""
                value="@ViewBag.TCEA">
        </div>

    </div>

    <div class="col-lg-3">

        Tipo de Año:
        <div class="input-group mb-3">
            <select class="form-control disabled" disabled>
                @if (ViewBag.anio == 360)
                {

                    <option value="360" selected>Ordinario</option>
                }
                else
                {
                    <option value="365" selected>Exacto</option>
                }
            </select>
        </div>

        Costes Iniciales:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">S/</span>
            </div>
            <input type="text" class="form-control disabled" disabled value="@ViewBag.gInicial" aria-label="">
        </div>

        TEA:
        <div class="input-group mb-3">
            <input type="text" class="form-control disabled" disabled aria-label="" value="@ViewBag.TEA">
            <div class="input-group-append">
                <span class="input-group-text">%</span>
            </div>
        </div>

    </div>

    <div class="col-lg-3">

        Fecha descuento:
        <div class="input-group mb-3">
            <input class="form-control" type="date" />
        </div>

        Costes Finales:
        <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text">S/</span>
            </div>
            <input type="text" class="form-control disabled" aria-label="" disabled value="@ViewBag.gFinal">
        </div>

        <button class="btn btn-success" style="width:100%" id="calculo">Calcular</button>
    
    </div>
</div>

<table class="table fcard">
    <thead>
        <tr>
            <th>
                Cliente
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Monto)
            </th>
            <th>Fecha de Vencimiento</th>
            <th>N° Días</th>
            <th>
                TEP
            </th>
            <th>
                d
            </th>
            <th>
                Descuento
            </th>
            <th>
                Coste Inicial
            </th>
            <th>
                Coste Final
            </th>
            <th>
                Valor Neto
            </th>
            <th>
                Valor a Recibir
            </th>
            <th>
                Flujo
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @(item.NombreCliente)
                </td>
                <td>
                    S/@Html.DisplayFor(modelItem => item.Monto)
                </td>
                <td>
                    @(item.FechaPago.ToString("dd/MM/yyyy"))
                </td>
                <td style="font-weight:700; color:@(item.FechaPago.Date <= DateTime.Now.Date?"red":"green")">
                    @(item.FechaPago.Date <= DateTime.Now.Date?"Pagado":(item.FechaPago.Date-DateTime.Now.Date).TotalDays)
                </td>
                <td id="TEP">
                    @item.TEP%
                </td>
                <td id="D">
                    @item.d%
                </td>
                <td id="DESCUENTO">
                    @item.Descuento
                </td>
                <td id="COSTEINICIAL">
                    @item.gInicial
                </td>
                <td id="COSTEFINAL">
                    @item.gFinal
                </td>
                <td id="VALORNETO">
                    @item.ValorNeto
                </td>
                <td id="VALORRECIBIR">
                    @item.ValorRecibir
                </td>
                <td id="FLUJO">
                    @item.Flujo
                </td>
            </tr>
        }
    </tbody>
</table>
